# Домашнее задание к занятию «3.3. Лямбды, extension-функции, операторы»

В качестве результата пришлите ссылки на ваши GitHub-проекты в личном кабинете студента на сайте [netology.ru](https://netology.ru).

**Важно**: ознакомьтесь со ссылками, представленными на главной странице [репозитория с домашними заданиями](../README.md).

**Важно**: если у вас что-то не получилось, то оформляйте Issue [по установленным правилам](../report-requirements.md).

## Как сдавать задачи

1. Создайте на вашем компьютере Gradle-проект
1. Инициализируйте в нём пустой Git-репозиторий
1. Добавьте в него готовый файл [.gitignore](../.gitignore)
1. Добавьте в этот же каталог остальные необходимые файлы
1. Сделайте необходимые коммиты
1. Создайте публичный репозиторий на GitHub и свяжите свой локальный репозиторий с удалённым
1. Сделайте пуш (удостоверьтесь, что ваш код появился на GitHub)
1. Ссылку на ваш проект отправьте в личном кабинете на сайте [netology.ru](https://netology.ru)
1. Задачи, отмеченные, как необязательные, можно не сдавать, это не повлияет на получение зачета (в этом ДЗ все задачи являются обязательными)

## Мини-проект - ChatService

Личные сообщения - один из неотъемлемых компонентов почти любого социального сервиса.

Задача целиком творческая (руководитель вам сказал "делай, как хочешь"), вот требования:
1. Должны быть чаты (чат - это общение с одним человеком, т.н. `direct messages`)
1. Можно создавать чаты, удалять их, получать список имеющихся чатов
1. В каждом чате есть сообщения от 1 до нескольких (см. раздел ниже)
1. Имеется возможность создавать сообщения, редактировать их и удалять (для простоты - можно удалять и свои, и чужие)
1. В каждой чате есть прочитанные и не прочитанные сообщения

![](pic/chats.png)

Пользователь должен иметь возможность:
1. Получить информацию о количестве непрочитанных чатов (например, `service.getUnreadChatsCount`) - это количество чатов, в каждом из которых есть хотя бы одно непрочитанное сообщение
1. Получить список чатов (например, `service.getChats`) - где в каждом чате есть последнее сообщение (если нет, то пишется нет сообщений)
1. Получить список сообщений из чата, указав (после того, как вызвана данная функция, все отданные сообщения автоматически считаются прочитанными):
    * id чата
    * id последнего сообщения, начиная с которого нужно подгрузить более новые
    * количество сообщений
1. Создать новое сообщение
1. Удалить сообщение (при удалении последнего сообщения в чате весь чат удаляется)
1. Создать чат (чат создаётся тогда, когда пользователю, с которым до этого не было чата, отправляется первое сообщение)
1. Удалить чат (целиком удаляется все переписка)

**Важный момент**: чтобы отделять одного пользователя от другого, передавайте во все функции первым параметром `id` пользователя (например, `service.getChats(999)` - все чаты для пользователя с `id=999`)

Старайтесь по максимуму использовать lambda-функции (которые напишите сами) и extension-функции (которые есть в составе `Iterable`, `Collection`, `List`).

Расчёт статистики должен старайтесь производить как цепочку вызова lambda-функций (попробуйте обойтись без `for`, `while` и `do-while`).

<details>
<summary>Подсказки</summary>

1. Сообщения могут быть входящими и исходящими (причём то, что для одного пользователя входящее, для другого исходящее
1. Непрочитанными могут быть как входящие сообщений (тогда они участвуют в подсчёте статистики непрочитанных для получателя) так и отправленные (тогда они не участвуют в подсчёте статистики для отправителя)
</details>

Итого: у вас должен быть репозиторий на GitHub, в котором расположен ваш Gradle-проект с кодом (включая автотесты).

**Важно**: автотесты должны быть, в том числе на исключения.
